<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XelzBux</title>

<style>
    body { background:#0f0f10; color:white; text-align:center; font-family:Arial; }
    header { background:#1a1a1d; padding:20px; font-size:26px; border-bottom:2px solid #00ffa6; color:#00ffa6; }
    .container { background:#1b1b1f; margin:40px auto; padding:20px; width:600px; border:1px solid #00ffa6; border-radius:12px; }

    .inputWrapper { position:relative; width:90%; margin:auto; }
    .inputWrapper input { width:100%; padding:14px 14px 14px 55px; font-size:18px; border-radius:10px; border:none; }

    .avatarInside {
        position:absolute; top:50%; left:12px; transform:translateY(-50%);
        width:35px; height:35px; border-radius:8px; border:2px solid #00ffa6; display:none;
    }
</style>
</head>

<body>

<header>XelzBux â€” Jual Robux Via Gamepass</header>

<div class="container">

    <h2>Masukkan Username Roblox</h2>

    <div class="inputWrapper">
        <img id="avatarInside" class="avatarInside">
        <input type="text" id="username" placeholder="Contoh: Jansen1778" oninput="updateAvatar()">
    </div>

</div>

<script>
async function updateAvatar() {
    let username = document.getElementById("username").value;
    let avatarImg = document.getElementById("avatarInside");

    if (username.length < 3) {
        avatarImg.style.display = "none";
        return;
    }

    try {
        // 1. Ambil userId dulu
        let userRes = await fetch(`https://users.roblox.com/v1/usernames/users`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ usernames: [username] })
        });

        let userData = await userRes.json();

        if (!userData.data || userData.data.length === 0) {
            avatarImg.style.display = "none";
            return;
        }

        let userId = userData.data[0].id;

        // 2. Ambil avatar HEADSHOT (pakai API ROBLOX resmi yang support CORS)
        let thumbURL =
            `https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${userId}&size=150x150&format=Png`;

        let thumbRes = await fetch(thumbURL);
        let thumbData = await thumbRes.json();

        if (!thumbData.data || !thumbData.data[0].imageUrl) {
            avatarImg.style.display = "none";
            return;
        }

        avatarImg.src = thumbData.data[0].imageUrl;
        avatarImg.style.display = "block";

    } catch (err) {
        console.log(err);
        avatarImg.style.display = "none";
    }
}
</script>

</body>
</html>
